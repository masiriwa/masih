/*This code has been written by Masiriwa Henry Fundi.
making it slower control,LCD
*/
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//******************************************************DECLARATION**************************************************************************
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
#include <LiquidCrystal.h>
LiquidCrystal lcd(7,6,5,4,3,2);
//===============================
int motorBe=9;//motor B enable
int motorBf=14;// motor B forward
int motorBb=15;// motor B backward
//================================
int motorAe=10;//motor A enable
int motorAf=17;// motor A forward
int motorAb=18;// motor A backward
//================================
int power=11;
int trigPin =12;  
int echoPin =13;
int gnd=12;
long duration, distance_cm; 

//=================================
int moistureSensor=A2;
int moisture;

//===================================
int mapValPin0;
int mapValPin1;
int mapValPin2;
int mapValPin3;
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//******************************************************THE SETUP**************************************************************************
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
void setup(){
pinMode(motorBe,OUTPUT); 
pinMode(motorBf,OUTPUT);
pinMode(motorBb,OUTPUT); 
pinMode(motorAe,OUTPUT);
pinMode(motorAf,OUTPUT); 
pinMode(motorAb,OUTPUT); 

//================================
pinMode(power,OUTPUT);
pinMode(trigPin, OUTPUT);// set the trig pin to output (Send sound waves)
pinMode(echoPin, INPUT);// set the echo pin to input (recieve sound waves)
pinMode(gnd,OUTPUT);
digitalWrite(power,HIGH);
digitalWrite(gnd,LOW);
//===================================
pinMode(moistureSensor, INPUT);




Serial.begin(9600);
lcd.begin(16,2);
}
//================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//******************************************************THE LOOP**************************************************************************
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
//========================================================================================================================================
void loop(){
//========================================
moisture=analogRead(moistureSensor);
//========================================
digitalWrite(trigPin, LOW);
delayMicroseconds(2); // for successfull sensor operations delays are required
digitalWrite(trigPin, HIGH);
delayMicroseconds(10);
digitalWrite(trigPin, LOW);
duration = pulseIn(echoPin, HIGH); // time taken to recieve an echo of the sent sound
distance_cm =((duration/2)/29.1);// convert the distance to centimeters
Serial.println(distance_cm);
if(distance_cm>=20 ){
//=========FORWARD============
forward(120);//reduce speed
}
else if(distance_cm >=30){
//=========FORWARD============
 forward(255);//move faster
 
 if(distance_cm >0 && distance_cm <31){
lcd.clear();
 }

}

else {
backward(120);
delay(1500);
left(120);
delay(1000);
stopMovement();
}
sendTOSerial();
}
//===========================================================================================================



